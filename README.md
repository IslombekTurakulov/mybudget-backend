# MyBudget (–ú–æ–π –±—é–¥–∂–µ—Ç)

–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å–∞ –∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã, —É–ø—Ä–∞–≤–ª—è—Ç—å –±—é–¥–∂–µ—Ç–∞–º–∏ –∏ –ø–æ–ª—É—á–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ —Å–≤–æ–∏–º —Ñ–∏–Ω–∞–Ω—Å–∞–º.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë—ç–∫–µ–Ω–¥

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/IslombekTurakulov/MyBudget-backend.git
cd MyBudget-backend
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
chmod +x run-local-backend.sh
./run-local-backend.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/IslombekTurakulov/MyBudget-android.git
cd MyBudget-android
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Android Studio –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –ë—ç–∫–µ–Ω–¥
- **–Ø–∑—ã–∫**: Kotlin
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Ktor
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 17
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker & Docker Swarm
- **–ü—Ä–æ–∫—Å–∏**: Traefik
- **CI/CD**: GitHub Actions

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ë—ç–∫–µ–Ω–¥
- Docker –∏ Docker Swarm
- PostgreSQL 17
- JDK 17+
- Gradle 8.0+

### –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- Android Studio
- Android SDK 34+
- Kotlin 1.9+
- Firebase CLI

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ë—ç–∫–µ–Ω–¥

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
PG_USER=your_db_user
PG_PASSWORD=your_db_password
PG_DATABASE=your_db_name
JWT_SECRET=your_jwt_secret
FIREBASE_CREDENTIALS=path_to_firebase_credentials.json
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
./run-local-backend.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Docker –∏ Docker Compose
- –°–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Docker —Å–µ—Ç–∏
- –ó–∞–ø—É—Å–∫–∞–µ—Ç PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Gradle
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ë—ç–∫–µ–Ω–¥

#### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª Actions –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –í—ã–±–µ—Ä–∏—Ç–µ workflow "Quick Deploy"
3. –ù–∞–∂–º–∏—Ç–µ "Run workflow"
4. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥ –æ–±—Ä–∞–∑–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: latest)
5. –ù–∞–∂–º–∏—Ç–µ "Run workflow"

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Docker Swarm
- –°–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ç–∏
- –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
  1. PostgreSQL
  2. Traefik
  3. Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–æ–±–∏—Ä–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥–∏

#### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

1. –°–æ–±–µ—Ä–∏—Ç–µ Docker –æ–±—Ä–∞–∑:
```bash
docker build -t mybudget-backend .
```

2. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é Docker Swarm:
```bash
docker stack deploy -c docker-compose.yml backend
```

#### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**:
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞–Ω–Ω—ã–µ PostgreSQL —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏
   - –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `FULL_RESET=true`

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `docker service ls`
   - –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker service logs backend_backend`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check: `curl http://51.250.65.154/ping`

3. **–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
   - Docker Swarm –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
   - –ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç–∫–∞—Ç–∏—Ç—å –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏: `docker service rollback backend_backend`

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Docker Secrets
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —à–∏—Ñ—Ä—É—é—Ç—Å—è
   - Traefik –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç SSL/TLS —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—é

## API

### –ë–∞–∑–æ–≤—ã–π URL
```
http://51.250.65.154
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∫—Ä–æ–º–µ `/ping`, —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω:
```
Authorization: Bearer <token>
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥
- `POST /auth/verify-email` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- `POST /auth/reset-password` - –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

#### –ü—Ä–æ–µ–∫—Ç—ã
- `POST /projects` - –°–æ–∑–¥–∞–Ω–∏–µ
- `GET /projects` - –°–ø–∏—Å–æ–∫
- `GET /projects/{id}` - –î–µ—Ç–∞–ª–∏
- `PUT /projects/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE /projects/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ

#### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `POST /transactions` - –°–æ–∑–¥–∞–Ω–∏–µ
- `GET /transactions` - –°–ø–∏—Å–æ–∫
- `GET /transactions/{id}` - –î–µ—Ç–∞–ª–∏
- `PUT /transactions/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE /transactions/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /analytics/overview` - –û–±—â–∞—è
- `GET /analytics/transactions` - –ü–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º
- `GET /analytics/categories` - –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `GET /notifications` - –°–ø–∏—Å–æ–∫
- `POST /notifications/read` - –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
- `POST /notifications/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `GET /settings` - –ü–æ–ª—É—á–∏—Ç—å
- `PUT /settings` - –û–±–Ω–æ–≤–∏—Ç—å

#### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `POST /device-tokens` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `DELETE /device-tokens/{token}` - –£–¥–∞–ª–µ–Ω–∏–µ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```bash
docker stack deploy -c docker-compose.monitoring.yml monitoring
```

2. –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º:
   - Grafana: http://51.250.65.154/grafana (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: admin)
   - Prometheus: http://51.250.65.154/prometheus

### –ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è

1. **–ë—ç–∫–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
   - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤

2. **PostgreSQL**:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

3. **Traefik**:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤
   - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### –î–∞—à–±–æ—Ä–¥—ã

–í Grafana –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞—à–±–æ—Ä–¥—ã:
- Backend Monitoring - –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –±—ç–∫–µ–Ω–¥–∞
- Database Monitoring - –º–µ—Ç—Ä–∏–∫–∏ PostgreSQL
- Traefik Monitoring - –º–µ—Ç—Ä–∏–∫–∏ Traefik

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

1. –í Grafana –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª Alerting
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞:
   - –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU (>80%)
   - –ë–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (>1s)
   - –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
   - –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö